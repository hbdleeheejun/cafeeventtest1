<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>좌석 선택 - Lee Hee Jun Birthday Cafe</title>
<style>
  body {
    margin:0; font-family:Pretendard, Arial, sans-serif;
    background:#f0f4f8; display:flex; justify-content:center; align-items:center;
    min-height:100vh;
  }

  .seat-container {
    background:#fff; padding:32px; border-radius:16px;
    text-align:center; max-width:960px;
  }

  h2 { margin-bottom:24px; }

  .stage { 
    background:#d3d6dd; font-weight:700; padding:16px;
    border-radius:8px; margin:0 auto 24px auto; /* 가운데 정렬 */
    width:50%;
  }

  .seat-grid {
    display:grid;
    grid-template-columns: repeat(12, 28px);
    gap:10px;
    justify-content:center;
    margin-bottom:24px;
  }

  .seat {
    width:28px; height:28px;
    border-radius:50%;
    background:#dbe2ef; /* 클릭 가능한 좌석 */
    cursor:pointer;
    transition: background 0.2s;
  }

  .seat.selected { background:#24426b; } /* H22 선택 시 색 변경 */
  .seat.disabled { background:#a3a3a3; cursor:default; } /* 이미 선택된 좌석 */

  .selected-seat { font-weight:700; margin-bottom:24px; }
  .reserve-btn {
    padding:12px 24px; background:#24426b; color:#fff; /* 버튼 색상 변경 */
    border:none; border-radius:12px; cursor:pointer; font-size:16px; font-weight:700;
  }
  .reserve-btn:hover { background:#1e3560; }
</style>
</head>
<body>

<div class="seat-container">
  <h2>STEP 2. 좌석 선택</h2>
  <div class="stage">STAGE</div>

  <div class="seat-grid" id="seatGrid"></div>

  <div class="selected-seat" id="selectedSeat">선택 좌석: 없음</div>
  <button class="reserve-btn" onclick="confirmSeat()">다음 단계</button>
</div>

<script>
  const seatGrid = document.getElementById('seatGrid');
  const selectedSeat = document.getElementById('selectedSeat');

  const rows = 10;
  const cols = 12;

  const disabledSeats = ['1-3','1-5','2-2','2-6','3-4','3-7','7-3','7-5','7-7','8-2','8-8','9-4','9-6','10-3','10-7','10-10'];

  const hRow = 8;
  const hCol = 6; // H열 중앙 좌석
  const seats = [];

  // 좌석 생성
  for(let r=1; r<=rows; r++){
    for(let c=1; c<=cols; c++){
      const seat = document.createElement('div');
      seat.className = 'seat';
      seat.dataset.row = r;
      seat.dataset.col = c;

      const seatKey = r + '-' + c;
      if(disabledSeats.includes(seatKey)){
        seat.classList.add('disabled');
      }

      seat.addEventListener('click', () => {
        if(r === hRow && c === hCol){
          seat.classList.add('selected');
          selectedSeat.textContent = '선택 좌석: H22';
        } else if(!seat.classList.contains('disabled')){
          alert('[이미 선택된 좌석입니다.]');
          animateSeatsRandom();
        }
      });

      seats.push(seat);
      seatGrid.appendChild(seat);
    }
  }

  function animateSeatsRandom(){
    const seatsToAnimate = seats.filter(s => {
      const r = parseInt(s.dataset.row);
      const c = parseInt(s.dataset.col);
      return !(r===hRow && c===hCol) && !s.classList.contains('disabled');
    });

    // 불규칙 순서로 섞기
    for(let i=seatsToAnimate.length -1; i>0; i--){
      const j = Math.floor(Math.random() * (i+1));
      [seatsToAnimate[i], seatsToAnimate[j]] = [seatsToAnimate[j], seatsToAnimate[i]];
    }

    // 순차적으로 회색으로 변함
    seatsToAnimate.forEach((s, idx) => {
      setTimeout(()=> s.classList.add('disabled'), idx*20);
    });
  }

  function confirmSeat(){
    if(selectedSeat.textContent==='선택 좌석: H22'){
        // 다음 단계 페이지로 이동
        window.location.href = "complete.html";
    } else {
        alert('좌석을 선택해주세요.');
    }
  }
</script>

</body>
</html>