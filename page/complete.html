<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>예매 완료 - Lee Hee Jun Birthday Cafe</title>
<style>
body {
  margin:0; font-family:Pretendard, Arial, sans-serif;
  background:#f0f4f8;
  display:flex; justify-content:center; align-items:center;
  min-height:100vh;
}

.ticket-box {
  display:flex; gap:24px;
  background:#fff; padding:32px; border-radius:16px;
  max-width:900px; width:90%;
  box-shadow:0 4px 20px rgba(0,0,0,0.1);
}

.poster { width:40%; border-radius:16px; overflow:hidden; }
.poster img { width:100%; display:block; }

.ticket-info { width:60%; }
h2 { margin-top:0; font-size:24px; margin-bottom:16px; }
hr { border:none; border-top:1px solid #ccc; margin:12px 0; }

table {
  width:100%; border-collapse:collapse;
  margin-top:12px;
}
td { padding:8px 6px; vertical-align:middle; border-bottom:1px solid #e0e0e0; }
td:first-child { font-weight:700; width:120px; }

.seat-check-btn {
  margin-left:12px;
  padding:4px 8px;
  font-size:12px;
  background:#24426b;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.seat-check-btn:hover { background:#1e3560; }

.home-btn {
  margin-top:24px;
  padding:12px 24px; background:#24426b; color:#fff;
  border:none; border-radius:12px; cursor:pointer; font-size:16px; font-weight:700;
}
.home-btn:hover { background:#1e3560; }

/* MODAL */
.modal {
  position:fixed; inset:0; display:none;
  background:rgba(0,0,0,0.7);
  align-items:center; justify-content:center;
  z-index:100;
}
.modal.active { display:flex; }
.modal-content {
  background:#fff;
  padding:24px;
  border-radius:16px;
  max-width:650px;
  width:90%;
  text-align:center;
}

.stage {
  background:#a0a0a0; /* 회색으로 변경 */
  color:#fff;
  padding:6px 12px;
  font-weight:700;
  border-radius:8px;
  margin-bottom:16px;
  display:inline-block;
}

.seats-grid {
  display:grid;
  grid-template-columns: repeat(12, 28px);
  gap:6px;
  justify-content:center;
  margin-top:8px;
}
.seat {
  width:28px; height:28px;
  border-radius:50%;
  background:#d9d9d9;
  display:flex; justify-content:center; align-items:center;
  cursor:pointer;
  position:relative;
  font-size:10px;
  font-weight:600;
}
.seat.selected { background:#24426b; color:#fff; }

.seat-tooltip {
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  font-size:10px;
  color:#fff;
  background:rgba(0,0,0,0.7);
  padding:2px 4px;
  border-radius:4px;
  display:none;
  pointer-events:none;
}

.close-btn {
  margin-top:16px;
  padding:8px 16px;
  background:#24426b;
  color:#fff;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.close-btn:hover { background:#1e3560; }
</style>
</head>
<body>

<div class="ticket-box">
  <div class="poster">
    <img src="poster.jpg" alt="포스터">
  </div>
  <div class="ticket-info">
    <h2>TICKET</h2>
    <hr>
    <p>고객님의 예매가 정상적으로 완료되었습니다.</p>

    <table>
      <tr>
        <td>예약번호</td>
        <td>HBDLEEHEEJUN (총 1매)</td>
      </tr>
      <tr>
        <td>상품</td>
        <td style="vertical-align:middle;">SCENE #0629</td>
      </tr>
      <tr>
        <td>일시</td>
        <td>2026년 06월 29일 (화) 오후 14:00 1회</td>
      </tr>
      <tr>
        <td>좌석</td>
        <td>
          1층 H열 22번
          <button class="seat-check-btn" onclick="openSeatModal()">좌석 위치 확인</button>
        </td>
      </tr>
      <tr>
        <td>예매자</td>
        <td>이희준</td>
      </tr>
      <tr>
        <td>티켓수령 방법</td>
        <td>현장수령 (음료 수령 시 직원분께 이야기해주세요)</td>
      </tr>
    </table>

    <button class="home-btn" onclick="goHome()">홈으로 돌아가기</button>
  </div>
</div>

<!-- 좌석 모달 -->
<div class="modal" id="seatModal">
  <div class="modal-content">
    <div class="stage">STAGE</div>
    <div class="seats-grid" id="seatsGrid"></div>
    <button class="close-btn" onclick="closeSeatModal()">닫기</button>
  </div>
</div>

<script>
function goHome(){ window.location.href="index.html"; }

function openSeatModal(){ 
  document.getElementById('seatModal').classList.add('active');
  generateSeats();
}

function closeSeatModal(){ document.getElementById('seatModal').classList.remove('active'); }

function generateSeats(){
  const grid = document.getElementById('seatsGrid');
  grid.innerHTML = '';
  const rows = ['A','B','C','D','E','F','G','H','I','J'];
  const cols = 12;

  const hRowIndex = 7; // H열
  const hStartCol = 0; // H열 좌석 배치 시작
  const hCenterCol = 5; // H22 (왼쪽에서 6번째 좌석)

  const disabledSeats = [0,2,3,7,11,14,18,20,25,30]; // 회색 좌석 예시

  for(let r=0;r<rows.length;r++){
    for(let c=0;c<cols;c++){
      const seat = document.createElement('div');
      seat.classList.add('seat');

      const tooltip = document.createElement('div');
      tooltip.classList.add('seat-tooltip');
      
      // H열 tooltip
      if(r===hRowIndex && c>=hStartCol && c<=hStartCol+11){
        tooltip.textContent = `H${17+c}`;
        seat.appendChild(tooltip);

        if(c===hCenterCol){
          seat.classList.add('selected');
          seat.textContent='H22';
        }
      } else {
        tooltip.textContent = `${rows[r]}${c+1}`;
        seat.appendChild(tooltip);

        if(disabledSeats.includes(r*cols+c)){
          seat.classList.add('disabled');
        }
      }

      seat.addEventListener('mouseenter',()=>{
        tooltip.style.display='block';
      });
      seat.addEventListener('mouseleave',()=>{
        tooltip.style.display='none';
      });

      seat.addEventListener('click',()=>{
        if(seat.classList.contains('selected')){
          alert('H22 좌석이 선택되었습니다.');
        } else if(seat.classList.contains('disabled')){
          alert('이미 선택된 좌석입니다.');
        }
      });

      grid.appendChild(seat);
    }
  }
}
</script>

</body>
</html>
